# RxMen Discovery Call Copilot - Environment Variables Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="RxMen Discovery Call Copilot API"
APP_VERSION="1.0.0"
DEBUG=false

# Server Configuration
HOST=0.0.0.0
PORT=8000

# =============================================================================
# API KEYS (Required for full functionality)
# =============================================================================

# Anthropic Claude API
# Get your key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxx

# OpenAI API (for embeddings)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxx

# Pinecone (for vector database)
# Get your key from: https://app.pinecone.io/
PINECONE_API_KEY=xxxxxxxxxxxxxxxxxxxxx
PINECONE_ENVIRONMENT=us-east-1-aws
PINECONE_INDEX_NAME=rxmen-medical-knowledge

# =============================================================================
# GOOGLE SHEETS LOGGING (Optional - for form submission tracking)
# =============================================================================

# Google Sheets Configuration
# This logs all form submissions to a Google Sheet for tracking and analysis.
# The app works perfectly WITHOUT this - it will just log a warning.
#
# Setup Instructions:
# 1. Go to Google Cloud Console: https://console.cloud.google.com/
# 2. Create a new project (or select existing)
# 3. Enable Google Sheets API (do NOT need Google Drive API)
# 4. Create a Service Account:
#    - Go to IAM & Admin > Service Accounts
#    - Create new service account
#    - Click on the service account > Keys > Add Key > Create new key > JSON
#    - Download the JSON file
# 5. Convert JSON to single-line format:
#    Option A: Use online tool
#      - Go to: https://www.text-utils.com/json-formatter/
#      - Paste your JSON file contents
#      - Click "Remove whitespace" or "Minify"
#      - Copy the result
#    Option B: Use command line
#      - cat service-account.json | jq -c
# 6. Paste the minified JSON below (entire thing on one line)
# 7. Create a Google Sheet:
#    - Go to Google Sheets and create a new spreadsheet
#    - Name the first sheet "Testing Log" (this will be used automatically)
# 8. Share the Google Sheet with the service account:
#    - Get the email from JSON file (client_email field)
#    - Share your sheet with that email address
#    - Give "Editor" permission
# 9. Get your Sheet ID from the URL:
#    https://docs.google.com/spreadsheets/d/[THIS_IS_THE_SHEET_ID]/edit
# 10. Paste the Sheet ID below

# Google Sheet ID (from URL)
GOOGLE_SHEET_ID=your-google-sheet-id-here

# Service Account Credentials (entire JSON as single-line string)
GOOGLE_SHEETS_CREDENTIALS={"type":"service_account","project_id":"your-project","private_key_id":"key-id","private_key":"-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n","client_email":"your-service-account@your-project.iam.gserviceaccount.com","client_id":"123456789","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/your-service-account%40your-project.iam.gserviceaccount.com"}

# NOTE: If these variables are not set, the app will still work normally.
# Sheets logging will be disabled with a warning in the logs.

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Claude Model Selection
CLAUDE_MODEL=claude-sonnet-4-20250514
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.7

# OpenAI Embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# RAG SETTINGS
# =============================================================================

# RETRIEVAL SETTINGS (Used at query time)
RAG_TOP_K=8               # Number of chunks to retrieve from Pinecone
                          # Based on handoff doc specification (test queries use top_k=8)
                          # With 50+ root causes to diagnose, 8 chunks provide better context

# CHUNKING SETTINGS (Already applied in Step 4 - for documentation only)
RAG_CHUNK_SIZE=800        # Target tokens per chunk (actual avg: 731 tokens)
RAG_CHUNK_OVERLAP=75      # Overlap between chunks (as implemented in Step 4)

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Comma-separated list of allowed origins
# Add your frontend URL here
# NOTE: "null" allows testing with file:// protocol (opening index.html directly)
# For production, remove "null" and only allow specific domains
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8080,null

# =============================================================================
# DATA PATHS
# =============================================================================

# Path to extracted medical knowledge text files
MEDICAL_KNOWLEDGE_PATH=../data/extracted_text

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=INFO

# =============================================================================
# NOTES
# =============================================================================

# To get started:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your API keys above
# 3. Adjust settings as needed
# 4. Run: uvicorn app.main:app --reload

# For production deployment:
# - Set DEBUG=false
# - Use production API keys (not test keys)
# - Configure proper CORS origins
# - Consider using environment-specific .env files
